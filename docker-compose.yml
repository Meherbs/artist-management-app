application:
  build: backend
  volumes:
    - "./backend:/var/www"
  links:
    - database

client:
  build: frontend
  volumes:
    - "./frontend:/app"
  links:
    - nginx-back

database:
  image: webhippie/mariadb
  ports:
    - 3306:3306
  environment:
    MYSQL_ROOT_PASSWORD: root
    MYSQL_DATABASE: artist_management_meher
    MYSQL_USER: root
    MYSQL_PASSWORD: root
    POSTGRES_PASSWORD: postgres
    POSTGRES_USER: postgres
    POSTGRES_DB: symfony_dev

nginx-front:
  image: nginx
  ports:
    - 8080:8080
  links:
    - client
  volumes:
    - ./config/nginx/nginx.conf:/etc/nginx/nginx.conf
    - ./config/nginx/angular.conf:/etc/nginx/conf.d/default.conf

nginx-back:
  image: nginx
  ports:
    - 8000:8000
  links:
    - application
  volumes:
    - ./config/nginx/nginx.conf:/etc/nginx/nginx.conf
    - ./config/nginx/symfony.conf:/etc/nginx/conf.d/default.conf
